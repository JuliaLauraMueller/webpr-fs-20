<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>Scope Tests</title>
</head>
<body>
<script>

    document.writeln("------------------------------");
    document.writeln("Quiz Week 8:");

    function Todo(text, done){
        // function check() {
        //     done = true;
        // }
        //const done = false;
        const check = () => done = true;
        return {
            getText: () => text,
            isDone: () => done,
            check: check
        }
    }

    let todo = Todo("buy milk", false);
    todo.check();
    document.writeln(todo.isDone());

   document.writeln("------------------------------");
   document.writeln("Quiz Week 8 Shows True: ");

   function handle(count, callback) {
       const result = [];
       for(let i=0; i < count; i++){
           callback( result );
       }
       //callback( result );
       return result;
   }

   //let it = [];
   document.writeln( handle( 3, it => it.push(1) ).length === 3);

   document.writeln("------------------------------");
   document.writeln("Quiz Week 8 Assignment Function failsafe: ");

   // Funktion
   const failSafeTwo = x => callback => arg => {
       try { return callback(arg)} catch{ return (x)}
   }

   function failSafe(x){
       return (callback) => {
           return (arg) => {
               try
               {
                   return callback(arg);
               }
               catch  {
                  return x
               }
           }
       }
    }

   const doError    = x => { throw new Error() };
   const errorCount = failSafe (1) (doError);

   document.writeln(failSafe (false) (x=>x) (true) && failSafe (true) (doError) (null) && errorCount(null) === 1)


</script>
</body>
</html>



